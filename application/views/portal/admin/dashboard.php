

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title><?= $title;?></title>

    <?= $this->load->view('inc/css')?>

</head>
<body class="page-body " >

<div class="page-container">

    <div class="sidebar-menu">

        <div class="sidebar-menu-inner">
            <?= $this->load->view('inc/portal_sidebar')?>
        </div>

    </div>

    <div class="main-content">
      
      <?php $this->load->view('portal/admin/header_admin')?>

      <div class="row">
        <div class="col-lg-11 col-md-11 col-sm-12 col-xs-12 ">

          <ul class="nav nav-tabs bordered"><!-- available classes "bordered", "right-aligned" -->
          <li class="active">
            <a href="#home" data-toggle="tab">
              <span class="hidden-xs">Dashboard</span>
            </a>
          </li>
          <li>
            <a href="#approved" data-toggle="tab">
              <span class="hidden-xs">Approved</span>
            </a>
          </li>
          <li>
            <a href="#pending" data-toggle="tab">
              <span class="hidden-xs">Pending</span>
            </a>
          </li>
         
        </ul>
        
        <div class="tab-content">
          <div class="tab-pane active" id="home">
            
            <div class="row">
              <div class="col-lg-4 col-md-3 col-sm-3 col-xs-12">


                <div class="tile-stats tile-white-blue">
                  <div class="icon"><i class="fa fa-users"></i></div>
                  <div class="num"><?=$dashboard->row('portal_user')?></div>
                  
                  <h3>Registered users</h3>
                  <p>Parent-Partners created an account</p>
                </div>

                <div class="tile-stats tile-blue">
                  <div class="icon"><i class="fa fa-check"></i></div>
                  <div class="num"><?=$dashboard->row('approved_user')?></div>
                  
                  <h3>Approved</h3>
                </div>

                <div class="tile-stats tile-red">
                  <div class="icon"><i class="fa fa-times"></i></div>
                  <div class="num"><?=$dashboard->row('pending_user')?></div>
                  
                  <h3>Pending</h3>
                </div>

                
              </div>

              <div class="col-lg-4 col-md-3 col-sm-3 col-xs-12">
                <div class="tile-stats tile-white-green">
                  <div class="icon"><i class="fa fa-check"></i></div>
                  <div class="num"><?=$dashboard->row('approved')?></div>
                  
                  <h3>Approved Learners</h3>
                  <p>Learners that is registered and approved</p>
                </div>

                <hr/>

                <table  class="table table-sm table-hover responsive table-condensed table-striped datatable">
                  <thead>
                    <tr>
                      <th class="width-2">No.</th>
                      <th>Date</th>
                      <th  class="text-right">Count</th>
                    </tr>
                  </thead>
                  <tbody>
                    <?php 
                      $cnt = 1;
                      foreach($approve_per_date->result() as $r): ?>
                      <tr>
                        <td><?=$cnt++?></td>
                        <td><?=$r->date_approved?></td>
                        <td class="text-right"><?=$r->cnt?></td>
                      </tr>

                      <?php endforeach;?>
                  </tbody>
                </table>

              </div>

              <div class="col-lg-4 col-md-3 col-sm-3 col-xs-12">
                <div class="tile-stats tile-white-red">
                  <div class="icon"><i class="fa fa-times"></i></div>
                  <div class="num"><?=$dashboard->row('pending')?></div>
                  
                  <h3>Pending Learners</h3>
                  <p>Learners with Pending Application</p>
                </div>

                <hr/>

                <table  class="table table-sm table-hover responsive table-condensed table-striped datatable">
                  <thead>
                    <tr>
                      <th class="width-2">No.</th>
                      <th>Date</th>
                      <th  class="text-right">Count</th>
                    </tr>
                  </thead>
                  <tbody>
                    <?php 
                      $cnt = 1;
                      foreach($pending_per_date->result() as $r): ?>
                      <tr>
                        <td><?=$cnt++?></td>
                        <td><?=$r->date_apply?></td>
                        <td class="text-right"><?=$r->cnt?></td>
                      </tr>

                      <?php endforeach;?>
                  </tbody>
                </table>

              </div>

            </div>
            
          </div>

          <div class="tab-pane" id="approved">

            <h3>Approved Learners</h3>
            <table  class="table table-sm table-hover responsive table-condensed table-striped datatable">
              <thead>
                <tr>
                  <th class="width-2">No.</th>
                  <th>Learner Name</th>
                  <th class="text-right">Date Registered</th>
                  <th class="text-right">Date Approved</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <?php 
                  $cnt = 1;
                  foreach($registered_learners->result() as $r): ?>
                  <tr>
                    <td><?=$cnt++?></td>
                    <td><?=$r->stud_lastname.','.$r->stud_firstname?></td>
                    <td class="text-right"><?=date('m-d-Y', strtotime($r->prtle_date_apply))?></td>
                    <td class="text-right"><?=date('m-d-Y', strtotime($r->prtle_date_approved))?></td>
                    <td class="text-center"><button class="btn btn-xs btn-red"><i class="fa fa-times"></i> Deactivate</button></td>
                  </tr>

                  <?php endforeach;?>
              </tbody>
            </table>
          </div>

          <div class="tab-pane" id="pending">
            <h3>Pending Learners</h3>
            <table  class="table table-sm table-hover responsive table-condensed table-striped datatable">
              <thead>
                <tr>
                  <th class="width-2">No.</th>
                  <th>Learner Name</th>
                  <th>Status</th>
                  <th>Code</th>
                  <th>Registered Number</th>
                </tr>
              </thead>
              <tbody>
                <?php 
                  $cnt = 1;
                  foreach($pending_learners->result() as $r): ?>
                  <tr>
                    <td><?=$cnt++?></td>
                    <td><?=$r->stud_lastname.','.$r->stud_firstname?></td>
                    <td><?=$r->prtle_stud_approve == 'Y' ? '' : '<span class="badge badge-danger badge-roundless"> For approval</span>' ?></td>
                    <td><?=$r->prtle_code?></td>
                    <td><?=$r->stud_msg_cast?></td>
                  </tr>

                  <?php endforeach;?>
              </tbody>
            </table>

          </div>

        </div>
          
        </div>
      </div>

   
    </div>

    
</div> <!-- end of body container -->


<?= $this->load->view('inc/js')?>


<script type="text/javascript" charset="utf-8">
  $(document).ready(function() {
       //$('.carousel').carousel();

       /*//$('#learners').DataTable( {
        $('#learners').dataTable( {

            initComplete: function () {
                this.api().columns().every( function () {
                    var column = this;
                    var select = $('<select><option value=""></option></select>')
                        .appendTo( $(column.footer()).empty() )
                        .on( 'change', function () {
                            var val = $.fn.dataTable.util.escapeRegex(
                                $(this).val()
                            );
     
                            column
                                .search( val ? '^'+val+'$' : '', true, false )
                                .draw();
                        } );
     
                    column.data().unique().sort().each( function ( d, j ) {
                        select.append( '<option value="'+d+'">'+d+'</option>' )
                    } );
                } );
            }
        } );*/

      });
</script>
</body>
</html>