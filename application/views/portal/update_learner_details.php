
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title><?= $title;?></title>

    <?= $this->load->view('inc/css')?>

</head>
<body class="page-body " >

<div class="page-container">

    <div class="sidebar-menu">

        <div class="sidebar-menu-inner">
            <?= $this->load->view('inc/portal_sidebar')?>
        </div>

    </div>

    <div class="main-content">
     
        <h3><?=$title?></h3>
        <hr/>
        
      <div class="row">
        <div class="col-lg-6 col-md-6 col-sm-8 col-xs-12">
          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">Update Birthdate</h3>
            </div>
              <div class="panel-body">

                <form method="post" id="frmSubmit" action="<?=base_url()?>home/update_details" >
                    <div class="msg"></div>
                          <div class="form-group ">
                            <label>Learners Name </label>

                           <select class="form-control select2  has-success stud_id" name="stud_id"  >  <!--  onchange= "location = this.value" -->
                              <option disabled="" selected="">Select Learner</option>             
                              <?php 
                                  foreach ($learners->result() as $l):
                                    $lstud_id   = $l->stud_id;
                                    $lstud_name = $l->stud_lastname.', '. $l->stud_firstname.' '. $l->stud_suffix;

                                    $stud_birthdate = date('m/d/Y',strtotime($l->stud_birthdate));
                              ?>
                                  <option value="<?=$lstud_id?>" data-bdate="<?=$stud_birthdate?>" data-msgcast="<?=$l->stud_guardian_contact?>" > <?= $lstud_name?></option>
                              <?php endforeach; ?>
                          </select>

                          </div>

                            <div class="form-group ">
                              <label>Learners Birthdate </label>
                                <input type="text" class="form-control datepicker stud_birthdate" name="stud_birthdate" required="" autocomplete="off"  data-format="mm/dd/yyyy">
                                <span class="date_msg text-danger pt-5"></span> 
                                  
                            </div>


                          
                          <hr/>
                          <div class="form-group">
                              <button class="btn btn-success" type="submit">Update</button>
                              <button class="btn btn-default clear" type="reset">Clear</button>
                            </div>

                    </form>
                
              </div>
          </div>

          
        </div>

        <div class="col-lg-6 col-md-6 col-sm-8 col-xs-12">
          <div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">Update Contact</h3>
            </div>
              <div class="panel-body">

                <form method="post" id="frmSubmit2" action="<?=base_url()?>home/update_details_contact" >
                    <div class="msg_update"></div>

                          <div class="form-group ">
                            <label>Learners Name </label>

                           <select class="form-control select2  has-success stud_id2" name="stud_id"  >  <!--  onchange= "location = this.value" -->
                              <option disabled="" selected="">Select Learner</option>             
                              <?php 
                                  foreach ($learners->result() as $l):
                                    $lstud_id   = $l->stud_id;
                                    $lstud_name = $l->stud_lastname.', '. $l->stud_firstname.' '. $l->stud_suffix;

                                    $stud_birthdate = date('m/d/Y',strtotime($l->stud_birthdate));
                              ?>
                                  <option value="<?=$lstud_id?>" data-bdate="<?=$l->stud_birthdate?>" data-msgcast="<?=$l->stud_guardian_contact?>" > <?= $lstud_name?></option>
                              <?php endforeach; ?>
                          </select>

                          </div>

                          
                            <div class="form-group ">
                              <label>Contact Number</label>
                                <input class="form-control digit stud_contact" maxlength="11" type="text" name="stud_contact" autofocus="" required="" autocomplete="off" placeholder="09xxxxxxxxx">
                            </div>

                          
                          <hr/>
                          <div class="form-group">
                              <button class="btn btn-success" type="submit">Update</button>
                              <button class="btn btn-default clear" type="reset">Clear</button>
                            </div>

                    </form>
                
              </div>
          </div>
        </div>
      </div>
        
    </div>

    
</div> <!-- end of body container -->


<?= $this->load->view('inc/js')?>


<script type="text/javascript" charset="utf-8">
  $(document).ready(function() {
        
      $('.datepicker').datepicker().on('changeDate', function (ev) {
          $(this).datepicker('hide');
      });

      $(".digit").keypress(function (e) {
         //if the letter is not digit then display error and don't type anything
         if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {
            //display error message
            $("#errmsg").html("Digits Only").show().fadeOut("slow");
                   return false;
        }
      });


      $('#frmSubmit').crud();
      $('#frmSubmit2').update();

      $('.stud_id').on('change', function(){

        birthdate = $(this).find(':selected').data('bdate');
        //msg_cast  = $(this).find(':selected').data('msgcast');

        console.log(birthdate);

        $('.stud_birthdate').val(birthdate);
        //$('.stud_contact').val(msg_cast);


      });

      $('.stud_id2').on('change', function(){

        //birthdate = $(this).find(':selected').data('bdate');
        msg_cast  = $(this).find(':selected').data('msgcast');

        //console.log(birthdate+' '+msg_cast);

        //$('.stud_birthdate').val(birthdate);
        $('.stud_contact').val(msg_cast);


      });



  });
</script>
</body>
</html>