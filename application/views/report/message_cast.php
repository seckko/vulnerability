<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title><?= $title;?></title>

    <?= $this->load->view('inc/css')?>

</head>
<body class="page-body gray">

<div class="page-container"><!-- add class "sidebar-collapsed" to close sidebar by default, "chat-visible" to make chat appear always -->
    
    <div class="sidebar-menu">

        <div class="sidebar-menu-inner">
            <?= $this->load->view('inc/sidebar')?>
        </div>

    </div>

    <div class="main-content"> <!---START MAIN CONTENT -->
        

        <div class="row">
            <div class="col-md-10">
                <div class="panel panel-primary panel-shadow panel-table" >

                    <div class="panel-heading">
                        <div class="panel-title">
                            <h2 class="bold"><?=$title?></h2>
                        </div>

                    </div>
                    

                    <div class="panel-body">

                        <ul class="nav nav-tabs bordered"><!-- available classes "bordered", "right-aligned" -->
                            <li class="active">
                                <a href="#excel" data-toggle="tab">
                                    <span class="hidden-xs">Export to Excel</span>
                                </a>
                            </li>
                            <li>
                                <a href="#csv" data-toggle="tab">
                                    <span class="hidden-xs">Generate CSV File</span>
                                </a>
                            </li>

                            <li>
                                <a href="#mop" data-toggle="tab">
                                    <span class="hidden-xs">Create CSV for Mode of Payment</span>
                                </a>
                            </li>
                        </ul>

                        <div class="tab-content">
                            <div class="tab-pane active" id="excel">
                                <form  class="form-horizontal form-groups-bordered" action="<?php echo base_url()?>report/filter_message_cast" method="POST">
                                    
                                    <!-- <div class="form-group">
                                        <label class="col-sm-3 control-label">Student Type</label>
                                        
                                        
                                        <div class="col-sm-2">
                                          <input class="icheck" type="radio" value="" name="stud_type" >
                                              <label>All</label>
                                        </div>
                                    
                                        <div class="col-sm-2">
                                          <input class="icheck" type="radio" value="O" name="stud_type" >
                                              <label>Old Student</label>
                                        </div>
                                    
                                        <div class="col-sm-2">
                                          <input class="icheck" type="radio" value="N" name="stud_type" >
                                              <label>New Student</label>
                                        </div>
                                    
                                      </div> -->

                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Department</label>
                                        
                                        <div class="col-sm-5">

                                            <select class="form-control dept_id" name="dept_id" required="">
                                                    
                                                    <option value="all">ALL</option>
                                                    <?php foreach ($department->result() as $r): ?>
                                                            <option value="<?=$r->dept_id?>" ><?=$r->dept_name?></option>
                                                    <?php endforeach; ?>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Grade Level</label>
                                        
                                        <div class="col-sm-5">
                                            <select class="form-control lvl_id" name="lvl_id" required="" disabled="">
                                                    <option value="all">ALL</option>
                                            </select>
                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Section</label>
                                        
                                        <div class="col-sm-5">
                                            <select class="form-control sec_id" name="sec_id" required="" disabled=""> 
                                                    <option value="all">ALL</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-sm-3 col-sm-offset-3">
                                            <button class="btn btn-success" type="submit">FILTER</button>
                                        </div>
                                    </div>

                                </form>
                            </div>

                            <div class="tab-pane" id="csv">
                                <form  class="form-horizontal form-groups-bordered" action="<?php echo base_url()?>report/generate_csv_message_cast" method="POST">
                            
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Department</label>
                                        
                                        <div class="col-sm-5">

                                            <select class="form-control dept_id" name="dept_id" required="">
                                                    
                                                    <option value="all">ALL</option>
                                                    <?php foreach ($department->result() as $r): ?>
                                                            <option value="<?=$r->dept_id?>" ><?=$r->dept_name?></option>
                                                    <?php endforeach; ?>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Grade Level</label>
                                        
                                        <div class="col-sm-5">
                                            <select class="form-control lvl_id" name="lvl_id" required="" disabled="">
                                                    <option value="all">ALL</option>
                                            </select>
                                        </div>
                                    </div>


                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Section</label>
                                        
                                        <div class="col-sm-5">
                                            <select class="form-control sec_id" name="sec_id" required="" disabled=""> 
                                                    <option value="all">ALL</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-sm-3 col-sm-offset-3">
                                            <button class="btn btn-success" type="submit">FILTER</button>
                                        </div>
                                    </div>

                                </form>
                            </div>
                            
                            <div class="tab-pane" id="mop">
                                <form  class="form-horizontal form-groups-bordered" action="<?php echo base_url()?>report/generate_csv_mop" method="POST">
                            
                                    <div class="form-group">
                                        <label class="col-sm-3 control-label">Mode of Payment </label>
                                        
                                        <div class="col-sm-5">

                                            <select class="form-control mode" name="mode" required="">
                                               <option value="Monthly" >Monthly</option>
                                               <option value="Quarterly" >Quarterly</option>
                                               <option value="Semestral" >Semestral</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="col-sm-3 col-sm-offset-3">
                                            <button class="btn btn-success" type="submit">GENERATE</button>
                                        </div>
                                    </div>

                                </form>
                            </div>
                            

                        </div>


                    </div>
                </div>
            </div>
        </div>
        
        <div class="table-responive">
            <table class="table table-bordered table-striped datatable">
                <thead>
                    <th class="width-5 text-center">No. </th>
                    <th>Last Name</th>
                    <th>First Name</th>
                    <th>Mobile No.</th>
                    <th>Grade & Section</th>
                </thead>

                <tbody>
                    <?php 
                        $cnt = 1; 
                        foreach($student_section->result() as $r ): ?>
                    <tr>
                        <td class="text-center"><?= $cnt++?></td>
                        <td><?= $r->stud_lastname ?></td>
                        <td><?= $r->stud_firstname ?></td>
                        <td><?= $r->stud_guardian_contact ?></td>
                        <td><?= $r->lvl_name.' - '.$r->sec_name ?></td>
                    </tr>
                    <?php endforeach; ?>
                </tbody>
            </table>
        </div>
        
    </div><!---END MAIN CONTENT -->

    
    
</div> <!-- end of body container -->

<?= $this->load->view('inc/js')?>
<script type="text/javascript" charset="utf-8">
  $(document).ready(function() {
      

      $('.dept_id').on('change', function(e){
            e.preventDefault();

            var dept_id = $(this).val();

            if(dept_id != 'all'){
                $('.lvl_id').prop('disabled', false);
                $('.lvl_id').load(base_url+'report/get_level/'+dept_id);
            }else{
                $('.lvl_id, .sec_id').prop('disabled', true);
            }
      });

      $('.lvl_id').on('change', function(e){
            e.preventDefault();

            var lvl_id = $(this).val();

            if(lvl_id != 'all'){
                $('.sec_id').prop('disabled', false);
                $('.sec_id').load(base_url+'report/get_section/'+lvl_id);
            }else{
                $('.sec_id').prop('disabled', true);
            }
      });

    //$('#frmSubmit').crud();
       
  });
</script>
</body>
</html>