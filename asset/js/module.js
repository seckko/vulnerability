function alert_warning(msg){
	var a = '<div class="alert alert-warning">';
	a +='<button data-dismiss="alert" class="close"></button>';
	a +=''+msg+'';
	a += '</div>';
	return a;
}

function alert_success(text){
	var div = "";
		div +='<div class="alert alert-success fade in">';
		div += text;
		div +='</div>';
		return div;
}

function alert_error(text){
		var div = "";
		div +='<div class="alert alert-danger fade in">';
		//div +='<button class="close" data-dismiss="alert" type="button">×</button>';
		div += text;
		div +='</div>';
		return div;
}

function alert_minimal(text){
		var div = "";
		div +='<div class="alert alert-minimal fade in">';
		//div +='<button class="close" data-dismiss="alert" type="button">×</button>';
		div += text;
		div +='</div>';
		return div;
}


function gritter_success(text){
	var div ="";
	div += '<div role="alert" class="gritter-item-wrapper with-icon send-o success mb10">';
    div += 	'<div class="gritter-item">';
    div +=   	'<div class="gritter-without-image">';
    div +=      	'<span class="gritter-title">SUCCESS</span>';
    div +=      	'<p>'+text+'</p>';
    div +=    	'</div>';
    div +=    '<div style="clear:both"></div>';
    div +=  '</div>';
    div += '</div>';

    return div;
}

function gritter_error(text){
	var div ="";
	div += '<div role="alert" style="" class="gritter-item-wrapper with-icon times-circle danger mb10">';
    div += 	'<div class="gritter-item">';
    div +=   	'<div class="gritter-without-image">';
    div +=      	'<span class="gritter-title">ERROR</span>';
    div +=      	'<p>'+text+'</p>';
    div +=    	'</div>';
    div +=    '<div style="clear:both"></div>';
    div +=  '</div>';
    div += '</div>';

    return div;
}

function note_success(text){
	var div = "";
	div += '<div class="note note-success">';
	div += text;
	div += '</div>';
	return div;
}

function note_danger(text){
	var div = "";
	div += '<div class="note note-danger">';
	div += text;
	div += '</div>';
	return div;
}

function note_warning(text){
	var div = "";
	div += '<div class="note note-warning">';
	div += text;
	div += '</div>';
	return div;
}

function panel_danger(text){
	var div = "";
	div +='<div class="panel panel-danger">';
	div	+=	'<div class="panel-heading">';
	div +=		'<div class="panel-title"><i class="entypo-attention"></i> Ooops! an error occured</div>';
	div +=		'<div class="panel-options">';
	div +=			'<a data-rel="close" href="#"><i class="entypo-cancel"></i></a>';
	div +=		'</div>';
	div +=	'</div>';
	div += '<div class="panel-body text-red">'+text+'</div>';
	div +='</div>';
	return div;
}




function relocatebox(title,message,location){
	var body = '<p>'+message+'<p>';
	bootbox.dialog(
		body,
		[{
			"label" : "OK",
			"class" : "btn-success btn-small",
			"callback": function(e) {
				window.location.href = base_url+location;
			}
		}]);
	if(!$(".modal-header")[0]){
		$(".bootbox").prepend('<div class="modal-header label-info"><a href="javascript:;" class="close"><i class="icon-remove black"></i></a><h5 class="white"><b>'+title+'</b></h5></div>');
	}
	
}

function promptbox(title,message){
	var body = '<p>'+message+'<p>';
	bootbox.dialog(body,[{"label" : "OK", "class" : "btn-success  btn-small",}]);
	if(!$(".modal-header")[0]){
		$(".bootbox").prepend('<div class="modal-header btn-success"><a href="javascript:;" class="close"><i class="icon-remove black"></i></a><h5 class="white"><b>'+title+'</b></h5></div>');
	}
}


function alertbox(title,message){
	var body = '<p>'+message+'</p>';
	bootbox.dialog(
		body,
		[{"label" : "Close", "class" : " btn-danger  btn-small"}]);
	if(!$(".modal-header")[0]){
		$(".bootbox").prepend('<div class="modal-header label-important"><a href="javascript:;" class="close"><i class="icon-remove black"></i></a><h5 class="white"><b>'+title+'</b></h5></div>');
	}
}


function loading(){
	show_loading_bar({
			pct: 100,
			delay: 1.2,
			finish: function(pct)
				{
					show_loading_bar({
					pct: 30,
					delay: 1.7,
					wait: .5,
					finish: function()
					{
						show_loading_bar()
					}
					});
				}
			});
}


function gritter_err(err){
	$.gritter.add({
      title: 'Error',
      text: err,
      class_name: 'with-icon times-circle danger'
    });
}

function gritter_succ(err){
	$.gritter.add({
      title: 'Success',
      text: err,
      class_name: 'with-icon check-circle success'
    });
}

jQuery.fn.ForceNumericOnly = function(){
	return this.each(function()
	{
		$(this).keydown(function(e)
		{
			var key = e.charCode || e.keyCode || 0;
            // allow backspace, tab, delete, arrows, numbers and keypad numbers ONLY
            // home, end, period, and numpad decimal
            return (
            	key == 8 || 
            	key == 9 ||
            	key == 13 ||
            	key == 46 ||
            	key == 110 ||
            	key == 190 ||
            	(key >= 35 && key <= 40) ||
            	(key >= 48 && key <= 57) ||
            	(key >= 96 && key <= 105));
         });
	});
}


jQuery.fn.signup = function(){
	var base = $(this);
	var msg = base.find(".msg");
	var btn = base.find("button");
	base.submit(function(e){
		e.preventDefault();
		$.ajax({
			type:base.attr("method"),//get/post
			data:base.serialize(),
			url:base.attr("action"),//location for the url
			beforeSend:function(){

				msg.html(alert_minimal("Loging in. . .")).fadeIn();
				btn.prop("disabled",true);
			},
			success:function(rrdata){
				btn.prop("disabled",false);
				var rdata = $.parseJSON(rrdata);
				if(rdata.stat){
					base.html(alert_success(rdata.msg)).show();
				}
				else{
					msg.empty().html(alert_error(rdata.msg)).show();
				}
			},
			error:function(rdata){
				btn.prop("disabled",false);
				msg.empty().html(alert_error(rdata));
			}
		});
	});
}

jQuery.fn.register = function(){
	var base = $(this);
	var msg = $(".msg");
	var btn = base.find("button");
	var input = base.find("input");

	base.submit(function(e){
		e.preventDefault();
		$.ajax({
			type:base.attr("method"),//get/post
			data:base.serialize(),
			url:base.attr("action"),//location for the url
			beforeSend:function(){
				msg.html(alert_minimal("Processing. . .")).show();
				btn.prop("disabled",true);
				input.prop("disabled",true);
			},
			success:function(rrdata){
				/*btn.prop("disabled",false);*/
				
				var rdata = $.parseJSON(rrdata);
				if(rdata.stat){
					/*base.html(alert_success(rdata.msg)).show();*/
					msg.empty().fadeOut();
					$('.hide-after').fadeOut();
					$('.show-this').removeClass('hidden');
					//setTimeout(function(){ window.location.href = base_url+'portal'; }, 5000);
					//window.location.href = base_url+'portal';
				}
				else{
					btn.prop("disabled",false);
					input.prop("disabled",false);
					msg.empty().html(alert_error(rdata.msg)).show();
				}
			},
			error:function(rdata){
				btn.prop("disabled",false);
				msg.empty().html(alert_error(rdata));
			}
		});
	});
}



jQuery.fn.signin = function(){
	var base = $(this);
	var msg = base.find(".msg");
	var btn = base.find("button");
	base.submit(function(e){
		e.preventDefault();
		$.ajax({
			type:base.attr("method"),//get/post
			data:base.serialize(),
			url:base.attr("action"),//location for the url
			beforeSend:function(){
				//loading();
				msg.html(alert_minimal("Processing . . .")).show();
				btn.prop("disabled",true);
			},
			success:function(rrdata){
				btn.prop("disabled",false);
				var rdata = $.parseJSON(rrdata);
				if(rdata.stat){
					window.location.href = base_url+rdata.msg;
				}
				else{
					msg.empty().html(alert_error(rdata.msg)).show();
				}
			},
			error:function(rdata){
				btn.prop("disabled",false);
				msg.empty().html(alert_error(rdata));
			}
		});
	});
}

jQuery.fn.forgot = function(){
	var base = $(this);
	var msg = base.find(".msg");
	var btn = base.find("button");
	base.submit(function(e){
		e.preventDefault();
		$.ajax({
			type:base.attr("method"),//get/post
			data:base.serialize(),
			url:base.attr("action"),//location for the url
			beforeSend:function(){
				msg.html(alert_minimal("Processing . . .")).show();
				btn.prop("disabled",true);
			},
			success:function(rrdata){
				btn.prop("disabled",false);
				var rdata = $.parseJSON(rrdata);
				if(rdata.stat){
					//window.location.href = base_url+rdata.msg;
					msg.empty().html(alert_success(rdata.msg));

					window.setTimeout(function(){
						window.location = base_url + 'portal';
					},5000);

				}
				else{
					msg.empty().html(alert_error(rdata.msg)).show();
				}
			},
			error:function(rdata){
				btn.prop("disabled",false);
				msg.empty().html(alert_error(rdata));
			}
		});
	});
}

jQuery.fn.crud = function(){
	var base = $(this);
	var msg = base.find(".msg");
	var btn = base.find("button");
	
	base.submit(function(e){
		e.preventDefault();
		$.ajax({
			type:base.attr("method"),//get/post
			data:base.serialize(),
			url:base.attr("action"),//location for the url
			beforeSend:function(){
				msg.empty().html('Processing...');
				btn.prop("disabled",true);
			},
			success:function(rrdata){
				//msg.empty();
				btn.prop("disabled",false);
				var rdata = $.parseJSON(rrdata);
				if(rdata.stat){
					msg.empty().html(alert_success(rdata.msg));
					//$('.refresh').click();
					//$('.reset').click();
				}
				else{
					msg.empty().html(alert_error(rdata.msg));
				}
				
			},
			error:function(rdata){
				btn.prop("disabled",false);
				msg.empty().html(alert_error('An error occured, please try again later'));
			}
		});
	});
}

jQuery.fn.new_crud = function(){
	var base = $(this);
	var msg = base.find(".msg");
	var btn = base.find("button");
	
	base.submit(function(e){
		e.preventDefault();
		$.ajax({
			type:base.attr("method"),//get/post
			data:base.serialize(),
			url:base.attr("action"),//location for the url
			beforeSend:function(){
				msg.empty().html(alert_minimal('Processing . . .'));
				btn.prop("disabled",true);
			},
			success:function(rrdata){
				btn.prop("disabled",false);
				var rdata = $.parseJSON(rrdata);
				msg.empty().html(rdata.msg);
				
			},
			error:function(rdata){
				btn.prop("disabled",false);
				msg.empty().html(alert_error('An error occured, please try again later'));
			}
		});
	});
}


jQuery.fn.crud_simple = function(){
	var base = $(this);
	var msg = base.find(".msg");
	var btn = base.find("button");
	
	base.submit(function(e){
		e.preventDefault();
		$.ajax({
			type:base.attr("method"),//get/post
			data:base.serialize(),
			url:base.attr("action"),//location for the url
			beforeSend:function(){
				msg.empty().html('Processing...');
				btn.prop("disabled",true);
			},
			success:function(rrdata){
				btn.prop("disabled",false);
				var rdata = $.parseJSON(rrdata);

				if(rdata.stat){
					//msg.empty().html(rdata.msg);

					window.location = base_url + 'padmin/reservation_payment';
				}else{
					msg.empty().html(alert_error(rdata.msg));
				}
				
			},
			error:function(rdata){
				btn.prop("disabled",false);
				msg.empty().html(alert_error('Something went wrong, please try again later'));
			}
		});
	});
}


jQuery.fn.update = function(){
	var base = $(this);
	var msg = base.find(".msg_update");
	var btn = base.find("button");
	
	base.submit(function(e){
		e.preventDefault();
		$.ajax({
			type:base.attr("method"),//get/post
			data:base.serialize(),
			url:base.attr("action"),//location for the url
			beforeSend:function(){
				msg.empty().html(alert_minimal('Processing . . .'));
				btn.prop("disabled",true);
			},
			success:function(rrdata){
				btn.prop("disabled",false);
				var rdata = $.parseJSON(rrdata);
				msg.empty().html(alert_success(rdata.msg));
			},
			error:function(rdata){
				btn.prop("disabled",false);
				msg.empty().html(alert_error('An error occured, please try again later'));
			}
		});
	});
}


jQuery.fn.crud_register = function(){
	var base = $(this);
	var msg = base.find(".msg");
	var btn = base.find("button");
	
	base.submit(function(e){
		e.preventDefault();
		$.ajax({
			type:base.attr("method"),//get/post
			data:base.serialize(),
			url:base.attr("action"),//location for the url
			beforeSend:function(){
				msg.empty().html(alert_minimal('Processing . . .'));
				btn.prop("disabled",true);
			},
			success:function(rrdata){
				//msg.empty();
				btn.prop("disabled",false);
				var rdata = $.parseJSON(rrdata);
				if(rdata.stat){
					msg.empty().html(alert_success(rdata.msg)).show();
					
					window.setTimeout(function(){
						window.location = base_url + 'base/print_student/'+rdata.id;
					},3000)
				}
				else{
					msg.empty().html(alert_error(rdata.msg));
				}
				
			},
			error:function(rdata){
				btn.prop("disabled",false);
				msg.empty().html(alert_error('An error occured, please try again later'));
			}
		});
	});
}


jQuery.fn.imgcrop = function(){
	var base = $(this);
	var msg = base.find(".msg");
	var btn = base.find("button");
	base.submit(function(e){
		e.preventDefault();
		$.ajax({
			type:base.attr("method"),//get/post
			data:base.serialize(),
			url:base.attr("action"),//location for the url
			beforeSend:function(){
				msg.html(alert_minimal("Processing. . .")).show();
				btn.prop("disabled",true);
			},
			success:function(rrdata){
				btn.prop("disabled",false);
				var rdata = $.parseJSON(rrdata);
				if(rdata.stat){
					base.empty().html(alert_success(rdata.msg)).show();
				}
				else{
					msg.empty().html(alert_error(rdata.msg)).show();
				}
			},
			error:function(rdata){
				btn.prop("disabled",false);
				msg.empty().html(alert_error("Please Try Again"));
			}
		});
	});
}


jQuery.fn.sendinquiries = function(){
	var base = $(this);
	var msg = base.find(".msg");
	var btn = base.find("button");
	base.submit(function(e){
		e.preventDefault();
		$.ajax({
			type:base.attr("method"),//get/post
			data:base.serialize(),
			url:base.attr("action"),//location for the url
			beforeSend:function(){
				msg.html(alert_minimal("Processing. . .")).show();
				btn.prop("disabled",true);
			},
			success:function(rrdata){
				btn.prop("disabled",false);
				var rdata = $.parseJSON(rrdata);
				if(rdata.stat){
					msg.empty().html('<div style="padding:3px; font-color:black; background-color:grey">'+rdata.msg+'</div>').show().fadeOut(5000);
				}
				else{
					msg.empty().html('<div style="padding:3px; font-color:black; background-color:grey">'+rdata.msg+'</div>').show();
				}
			},
			error:function(rdata){
				btn.prop("disabled",false);
				msg.empty().html(alert_error("Please Try Again"));
			}
		});
	});
}


jQuery.fn.crud_edit = function(){
	var base = $(this);
	var msg = base.find(".msg");
	var btn = base.find("button");
	
	$.ajax({
		type:"POST",
		data:base.serialize(),
		url:base.attr("action"),
		beforeSend:function(){
			//msg.html(alert_minimal("Processing. . .")).show();
			btn.prop("disabled",true);
		},
		success:function(rrdata){
			btn.prop("disabled",false);
			var rdata = $.parseJSON(rrdata);
			if(rdata.stat){
				gritter_succ(rdata.msg);
				$('.close').click();
				$('.refresh').click();
			}
			else{
				gritter_err(rdata.msg);
			}
			$('modal').modal('toggle');
			
		},
		error:function(rdata){
			btn.prop("disabled",false);
			gritter_err('An error occured, please try again later');
		}
	});
	
}

jQuery.fn.crud_refresh = function(){
	var base = $(this);
	var msg = $(".msg");
	var btn = base.find("button");
	
	base.submit(function(e){
		e.preventDefault();
		$.ajax({
			type:base.attr("method"),//get/post
			data:base.serialize(),
			url:base.attr("action"),//location for the url
			beforeSend:function(){
				//msg.html(alert_minimal("Processing. . .")).show();
				btn.prop("disabled",true);
			},
			success:function(rrdata){
				btn.prop("disabled",false);
				var rdata = $.parseJSON(rrdata);
				if(rdata.stat){
					msg.empty().html(alert_success(rdata.msg)).show();
					window.setTimeout(function(){location.reload()},1000)
				}
				else{
					msg.empty().html(alert_error(rdata.msg)).show();
				}
				//console.log(rrdata);
			},
			error:function(data){
				btn.prop("disabled",false);
				msg.empty().html(alert_error("An error occured, please try again later"));
			}
		});
	});
}

jQuery.fn.confirm_student = function(){
	var base = $(this);
	var msg = base.find(".msg");
	var btn = base.find("button");
	
	base.submit(function(e){
		e.preventDefault();
		$.ajax({
			type:base.attr("method"),//get/post
			data:base.serialize(),
			url:base.attr("action"),//location for the url
			beforeSend:function(){
				//msg.html(alert_minimal("Processing. . .")).show();
				btn.prop("disabled",true);
			},
			success:function(rrdata){
				btn.prop("disabled",false);
				var rdata = $.parseJSON(rrdata);
				if(rdata.stat){
					msg.empty().html(alert_success(rdata.msg)).show();
					window.setTimeout(function(){location.reload()},3000);
				}
				else{
					msg.empty().html(alert_error(rdata.msg)).show();
				}
				//console.log(rrdata);
			},
			error:function(data){
				btn.prop("disabled",false);
				msg.empty().html(alert_error("An error occured, please try again later"));
			}
		});
	});
}


jQuery.fn.enroll_student = function(){
	var base = $(this);
	var msg = base.find(".msg");
	var btn = base.find("button");
	
	base.submit(function(e){
		e.preventDefault();
		$.ajax({
			type:base.attr("method"),//get/post
			data:base.serialize(),
			url:base.attr("action"),//location for the url
			beforeSend:function(){
				msg.html(alert_minimal("Processing. . .")).show();
				btn.prop("disabled",true);
			},
			success:function(rrdata){
				btn.prop("disabled",false);
				var rdata = $.parseJSON(rrdata);
				if(rdata.stat){
					msg.empty().html(alert_success(rdata.msg)).show();
					window.setTimeout(function(){location.reload()},5000)
				}
				else{
					msg.empty().html(alert_error(rdata.msg)).show();
				}
				//console.log(rrdata);
			},
			error:function(data){
				btn.prop("disabled",false);
				msg.empty().html(alert_error("An error occured, please try again later"));
			}
		});
	});
}

jQuery.fn.delete_refresh = function(){
	var base = $(this);
	var msg = base.find(".msg");
	var btn = base.find("button");
	
	base.submit(function(e){
		e.preventDefault();
		$.ajax({
			type:base.attr("method"),//get/post
			data:base.serialize(),
			url:base.attr("action"),//location for the url
			beforeSend:function(){
				msg.html(alert_minimal("Processing. . .")).show();
				btn.prop("disabled",true);
			},
			success:function(rrdata){
				btn.prop("disabled",false);
				var rdata = $.parseJSON(rrdata);
				if(rdata.stat){
					msg.empty().html('<strong>' + rdata.msg + '</strong>').show().fadeOut(2000,function(){
						location.reload();
					});
				}
				else{
					msg.empty().html(alert_error(rdata.msg)).show();
				}
			},
			error:function(rdata){
				btn.prop("disabled",false);
				msg.empty().html(alert_error("Please Try Again"));
			}
		});
	});
}

jQuery.fn.crudDelete_refresh = function(){
	var base = $(this);
	var msg = base.find(".msg");
	var btn = base.find("button");
	
	base.submit(function(e){
		e.preventDefault();
		$.ajax({
			type:base.attr("method"),//get/post
			data:base.serialize(),
			url:base.attr("action"),//location for the url
			beforeSend:function(){
				msg.html(alert_minimal("Processing. . .")).show();
				btn.prop("disabled",true);
			},
			success:function(rrdata){
				btn.prop("disabled",false);
				var rdata = $.parseJSON(rrdata);
				if(rdata.stat){
					msg.empty().html('<strong>' + rdata.msg + '</strong>').show().fadeOut(2000,function(){
						location.reload();
					});
				}
				else{
					msg.empty().html(alert_error(rdata.msg)).show();
				}
			},
			error:function(rdata){
				btn.prop("disabled",false);
				msg.empty().html(alert_error("Please Try Again"));
			}
		});
	});
}


jQuery.fn.searchclient = function(){
	var base = $(this);
	var url;
	var type = "GET";

	base.autocomplete({
		source:function(request, response){
			console.log(request);
			//$.getJSON(this.url , {term:request.term}, response );
			$.ajax({
				type:type,
				data:request,
				url:url,
				dataType: "json",
				beforeSend:function(){
					base.addClass('spinner');
				},
				success:function(rrdata){
					response($.map(rrdata,function(i,index){
						/*console.log(i);*/
						//var rdata = $.parseJSON(rrdata);
						//console.log("dataType="+request);
						return i;
					}));
					base.removeClass('spinner');
				},
				error:function(rdata){
					base.removeClass('spinner');
				}
			});
		}
	});

}


$(".datatable").dataTable({
    "sPaginationType": "bootstrap"
});


function show_password(){
	show_input 	= $('.show_password input');
	show_i 		= $('.show_password i');

	if(show_input.attr("type") == "text"){
        show_input.attr('type', 'password');
        show_i.addClass( "fa-eye-slash" );
        show_i.removeClass( "fa-eye" );
    }else if(show_input.attr("type") == "password"){
        show_input.attr('type', 'text');
        show_i.removeClass( "fa-eye-slash" );
        show_i.addClass( "fa-eye" );
    }

}


/*jQuery.fn.refresh_table = function(url){
	var base = $(this);
	base.empty().load(url);
      $.ajax({
        url: base_url+"admin/refresh_region/",
        cache: false,
        type: "POST",
        success : function (data) {
          $('#region_table').empty().html(data);
          $('#dataTblRegion').DataTable();
          $('select').select2({ minimumResultsForSearch: Infinity });

        },error : function(data){
          $('#region_table').empty().html(alert_minimal(data));
        }
      });
}*/


